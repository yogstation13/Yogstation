/obj/item/clothing/neck/polycloak
	name = "Polycloak"
	desc = "A cloak made for civilian use, capable of being colored."
	icon_state = "cloak"
	worn_icon_state = "Wcloak"
	greyscale_config = /datum/greyscale_config/polycloak
	greyscale_config_worn = /datum/greyscale_config/polycloak_worn
	greyscale_colors = "#FFFFFF#AAAAAA#BBBBBB"
	flags_1 = IS_PLAYER_COLORABLE_1

/obj/item/clothing/neck/boatcloak
	name = "Boat Cloak"
	desc = "A waterproof cloak meant to be worn on seabound vessels to protect clothing from the seawater."
	icon_state = "boatcloak"
	worn_icon_state = "wboatcloak"
	greyscale_config = /datum/greyscale_config/boatcloak
	greyscale_config_worn = /datum/greyscale_config/boatcloak_worn
	greyscale_colors = "#FFFFFF#AAAAAA#BBBBBB"
	flags_1 = IS_PLAYER_COLORABLE_1

/obj/item/clothing/neck/knightcloak
	name = "Knight Cloak"
	desc = "A raggedy cloak that seems to writhe and have a mind of its own."
	icon = 'monkestation/icons/obj/clothing/necks.dmi'
	worn_icon = 'monkestation/icons/mob/clothing/neck.dmi'
	icon_state = "knight_cloak"
	worn_icon_state = "knight_cloak"

/obj/item/clothing/neck/hornetcloak
	name = "Hornet Cloak"
	desc = "A vibrant red cloak."
	icon = 'monkestation/icons/obj/clothing/necks.dmi'
	worn_icon = 'monkestation/icons/mob/clothing/neck.dmi'
	icon_state = "hornet_cloak"
	worn_icon_state = "hornet_cloak"

/obj/item/clothing/neck/beecloak
	name = "Bee Cloak"
	desc = "A cloak made of fuzzy beehide"
	icon = 'monkestation/icons/obj/clothing/necks.dmi'
	worn_icon = 'monkestation/icons/mob/clothing/neck.dmi'
	icon_state = "beecloak"
	worn_icon_state = "beecloak"

/obj/item/clothing/neck/ascot
	name = "Ascot"
	desc = "A fancy scarf to keep your neck warm and ward off sharp objects"
	icon = 'monkestation/icons/obj/clothing/necks.dmi'
	worn_icon = 'monkestation/icons/mob/clothing/neck.dmi'
	icon_state = "ascot"
	worn_icon_state = "ascot"

/obj/item/clothing/neck/worldchampioncape
	name = "World Champion's Cape"
	desc = "I'll give him one last chance to back out. He might think he's a champ, but he's just a chump!."
	icon = 'monkestation/icons/obj/clothing/necks.dmi'
	worn_icon = 'monkestation/icons/mob/clothing/neck.dmi'
	icon_state = "worldchampion_cape"
	worn_icon_state = "worldchampion_cape"

/obj/item/clothing/neck/trans
	name = "trans pride cloak"
	desc = "Rep your preferred sexuality."
	icon = 'monkestation/icons/obj/clothing/necks.dmi'
	worn_icon = 'monkestation/icons/obj/clothing/necks.dmi'
	icon_state = "trans"
	worn_icon_state = "trans"
	resistance_flags = FIRE_PROOF

/obj/item/clothing/neck/pan
	name = "pansexual pride cloak"
	desc = "Rep your preferred sexuality."
	icon = 'monkestation/icons/obj/clothing/necks.dmi'
	worn_icon = 'monkestation/icons/obj/clothing/necks.dmi'
	icon_state = "pan"
	worn_icon_state = "pan"
	resistance_flags = FIRE_PROOF

/obj/item/clothing/neck/les
	name = "lesbian pride cloak"
	desc = "Rep your preferred sexuality."
	icon = 'monkestation/icons/obj/clothing/necks.dmi'
	worn_icon = 'monkestation/icons/obj/clothing/necks.dmi'
	icon_state = "les"
	worn_icon_state = "les"
	resistance_flags = FIRE_PROOF

/obj/item/clothing/neck/intersex
	name = "intersex pride cloak"
	desc = "Rep your preferred sexuality."
	icon = 'monkestation/icons/obj/clothing/necks.dmi'
	worn_icon = 'monkestation/icons/obj/clothing/necks.dmi'
	icon_state = "intersex"
	worn_icon_state = "intersex"
	resistance_flags = FIRE_PROOF

/obj/item/clothing/neck/gay
	name = "gay pride cloak"
	desc = "Rep your preferred sexuality."
	icon = 'monkestation/icons/obj/clothing/necks.dmi'
	worn_icon = 'monkestation/icons/obj/clothing/necks.dmi'
	icon_state = "gay"
	worn_icon_state = "gay"
	resistance_flags = FIRE_PROOF

/obj/item/clothing/neck/enby
	name = "nonbinary pride cloak"
	desc = "Rep your preferred sexuality."
	icon = 'monkestation/icons/obj/clothing/necks.dmi'
	worn_icon = 'monkestation/icons/obj/clothing/necks.dmi'
	icon_state = "enby"
	worn_icon_state = "enby"
	resistance_flags = FIRE_PROOF

/obj/item/clothing/neck/bi
	name = "bisexual pride cloak"
	desc = "Rep your preferred sexuality."
	icon = 'monkestation/icons/obj/clothing/necks.dmi'
	worn_icon = 'monkestation/icons/obj/clothing/necks.dmi'
	icon_state = "bi"
	worn_icon_state = "bi"
	resistance_flags = FIRE_PROOF

/obj/item/clothing/neck/aro
	name = "aro pride cloak"
	desc = "Rep your preferred sexuality."
	icon = 'monkestation/icons/obj/clothing/necks.dmi'
	worn_icon = 'monkestation/icons/obj/clothing/necks.dmi'
	icon_state = "aro"
	worn_icon_state = "aro"
	resistance_flags = FIRE_PROOF

/obj/item/clothing/neck/ace
	name = "asexual pride cloak"
	desc = "Rep your preferred sexuality."
	icon = 'monkestation/icons/obj/clothing/necks.dmi'
	worn_icon = 'monkestation/icons/obj/clothing/necks.dmi'
	icon_state = "ace"
	worn_icon_state = "ace"
	resistance_flags = FIRE_PROOF

/obj/item/clothing/neck/admincloak
	name = "admin cloak"
	desc = "Weh!"
	icon_state = "admincloak"
	worn_icon_state = "wadmincloak"
	greyscale_config = /datum/greyscale_config/admincloak
	greyscale_config_worn = /datum/greyscale_config/admincloak_worn
	greyscale_colors = "#FFFFFF"
	flags_1 = IS_PLAYER_COLORABLE_1

/obj/item/clothing/neck/mentorcloak
	name = "mentor cloak"
	desc = "Buzz!"
	icon = 'monkestation/icons/obj/clothing/necks/mentor_cloaks.dmi'
	worn_icon = 'monkestation/icons/mob/clothing/necks/mentor_cloaks.dmi'
	icon_state = "green_cloak"
	worn_icon_state = "green_cloak"
	var/current_cloak = "green"
	var/current_cloak_overlay = "lizar"
	var/datum/action/innate/select_cloak_appearance/select_cloak_appearance

/obj/item/clothing/neck/mentorcloak/Initialize(mapload)
	. = ..()
	select_cloak_appearance = new(src)

/obj/item/clothing/neck/mentorcloak/Destroy(force)
	QDEL_NULL(select_cloak_appearance)
	return ..()

/obj/item/clothing/neck/mentorcloak/examine(mob/user)
	. = ..()
	if(user.mind?.has_antag_datum(/datum/antagonist/changeling))
		. += span_warning("Well you can still feel the displeasure from the cloak it feels like \
							it might just let you wear it")
	if(!user.client?.is_mentor())
		. += span_warning("You can feel this cloak dispises you for lacking a high enough level of knowledge")

/obj/item/clothing/neck/mentorcloak/equipped(mob/living/user, slot)
	. = ..()
	if(slot & ITEM_SLOT_NECK)
		if(user.mind?.has_antag_datum(/datum/antagonist/changeling))
			to_chat(user, span_notice("I'll let you get way with it this time."))
		else if(!user.client?.is_mentor())
			lightningbolt(user)
			user.dropItemToGround(src)
			to_chat(user, span_userdanger("No mentor cloak for you!"))
			return
		select_cloak_appearance.Grant(user)
	if(slot & ITEM_SLOT_HANDS)
		if(user.mind?.has_antag_datum(/datum/antagonist/changeling))
			to_chat(user, span_notice("You feel it's power flow through your body"))
		else if(!user.client?.is_mentor())
			user.cause_pain(FULL_BODY, 20, STAMINA)
			user.sharp_pain(ARMS, 5, BURN, 20)
			user.apply_status_effect(/datum/status_effect/confusion)
			user.apply_status_effect(/datum/status_effect/jitter)
			user.apply_status_effect(/datum/status_effect/terrified)
			user.apply_status_effect(/datum/status_effect/temporary_blindness)
			to_chat(user, span_userdanger("You feel a surge of power hit you like a [span_bolddanger("TRUCK")] draining your stamina instantly"))

/obj/item/clothing/neck/mentorcloak/dropped(mob/living/user)
	. = ..()
	if(user.get_item_by_slot(ITEM_SLOT_NECK) == src)
		select_cloak_appearance.Remove(user)

/obj/item/clothing/neck/mentorcloak/worn_overlays(mutable_appearance/standing, isinhands)
	. = ..()
	if(!isinhands && current_cloak_overlay)
		. += mutable_appearance('monkestation/icons/mob/clothing/necks/mentor_cloak_overlays.dmi', current_cloak_overlay)

/datum/action/innate/select_cloak_appearance
	name = "Select Cloak Appearance"
	desc = "Select the appearance of your mentor cloak"
	button_icon = 'monkestation/icons/obj/clothing/necks/mentor_cloaks.dmi'
	button_icon_state = "green_cloak"
	background_icon_state = "bg_revenant"
	overlay_icon_state = "bg_revenant_border"

/datum/action/innate/select_cloak_appearance/Activate()
	. = ..()
	var/static/list/possible_cloaks = list(
		"black_cloak" = image(icon = 'monkestation/icons/obj/clothing/necks/mentor_cloaks.dmi', icon_state = "black_cloak"),
		"blue_cloak" = image(icon = 'monkestation/icons/obj/clothing/necks/mentor_cloaks.dmi', icon_state = "blue_cloak"),
		"red_cloak" = image(icon = 'monkestation/icons/obj/clothing/necks/mentor_cloaks.dmi', icon_state = "red_cloak"),
		"purple_cloak" = image(icon = 'monkestation/icons/obj/clothing/necks/mentor_cloaks.dmi', icon_state = "purple_cloak"),
		"green_cloak" = image(icon = 'monkestation/icons/obj/clothing/necks/mentor_cloaks.dmi', icon_state = "green_cloak"),
		"bloak" = image(icon = 'monkestation/icons/obj/clothing/necks/mentor_cloaks.dmi', icon_state = "bloak"),
		"flesh_cloak" = image(icon = 'monkestation/icons/obj/clothing/necks/mentor_cloaks.dmi', icon_state = "flesh_cloak")
	)
	var/static/list/possible_cloak_overlays = list(
		"lizar" = image(icon = 'monkestation/icons/hud/radial_mentor_cloak.dmi', icon_state = "lizar"),
		"moff" = image(icon = 'monkestation/icons/hud/radial_mentor_cloak.dmi', icon_state = "moff"),
		"sillycones" = image(icon = 'monkestation/icons/hud/radial_mentor_cloak.dmi', icon_state = "sillycones"),
		"human" = image(icon = 'monkestation/icons/hud/radial_mentor_cloak.dmi', icon_state = "human"),
		"ethereal" = image(icon = 'monkestation/icons/hud/radial_mentor_cloak.dmi', icon_state = "ethereal"),
		"plasmeme" = image(icon = 'monkestation/icons/hud/radial_mentor_cloak.dmi', icon_state = "plasmeme"),
		"snek" = image(icon = 'monkestation/icons/hud/radial_mentor_cloak.dmi', icon_state = "snek"),
		"bee" = image(icon = 'monkestation/icons/hud/radial_mentor_cloak.dmi', icon_state = "bee")
	)
	var/picked_cloak = show_radial_menu(owner, owner, possible_cloaks, radius = 50, require_near = TRUE)
	if(!picked_cloak)
		return
	var/picked_cloak_overlay = show_radial_menu(owner, owner, possible_cloak_overlays, radius = 50, require_near = TRUE)
	if(!picked_cloak_overlay)
		return
	var/obj/item/clothing/neck/mentorcloak/mentorcloak = owner.get_item_by_slot(ITEM_SLOT_NECK)
	if(!mentorcloak)
		return
	mentorcloak.current_cloak = picked_cloak
	mentorcloak.current_cloak_overlay = picked_cloak_overlay
	mentorcloak.icon_state = picked_cloak
	mentorcloak.worn_icon_state = picked_cloak
	mentorcloak.update_slot_icon()
	mentorcloak.update_appearance()

/obj/item/clothing/neck/helldivercape
	name = "helldiver cape"
	desc = "For Super Earth!."
	icon = 'monkestation/icons/obj/clothing/necks.dmi'
	worn_icon = 'monkestation/icons/mob/clothing/neck.dmi'
	icon_state = "helldiver_cape"
	worn_icon_state = "helldiver_cape"

/datum/loadout_item/neck/helldivercape
	name = "Helldiver Cape"
	item_path = /obj/item/clothing/neck/helldivercape

/datum/store_item/neck/helldivercape
	name = "Helldiver Cape"
	item_path = /obj/item/clothing/neck/helldivercape
	item_cost = 20000

/obj/item/clothing/neck/linjacket
	name = "ornate coat"
	desc = "You'll hold this weight."
	icon = 'monkestation/icons/obj/clothing/necks.dmi'
	worn_icon = 'monkestation/icons/mob/clothing/neck.dmi'
	icon_state = "linjacket"
	worn_icon_state = "linjacket"
	greyscale_config = /datum/greyscale_config/linjacket
	greyscale_config_worn = /datum/greyscale_config/linjacket_worn
	greyscale_colors = "#283c55#c4c36d"
	flags_1 = IS_PLAYER_COLORABLE_1

/datum/loadout_item/neck/linjacket
	name = "Ornate Coat"
	item_path = /obj/item/clothing/neck/linjacket

/datum/store_item/neck/linjacket
	name = "Ornate Coat"
	item_path = /obj/item/clothing/neck/linjacket
	item_cost = 5000

/obj/item/clothing/neck/straw_coat
	name = "Straw Coat"
	desc = "Traditional raincoat woven from straw."
	icon = 'monkestation/icons/obj/clothing/necks.dmi'
	worn_icon = 'monkestation/icons/mob/clothing/neck.dmi'
	icon_state = "straw_coat"
	worn_icon_state = "straw_coat"

