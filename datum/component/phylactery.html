<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <base href="../../" />
    <link rel="stylesheet" href="dmdoc.css" />
    <title>&#x2F;datum&#x2F;component&#x2F;phylactery - Yogstation 13</title>
</head>
<body>
<header>
    <a href="index.html">Yogstation 13</a> -
    <a href="index.html#modules">Modules</a> -
    <a href="index.html#types">Types</a>
 &mdash; <a href="datum/component/phylactery.html#var">Var Details</a> - <a href="datum/component/phylactery.html#proc">Proc Details</a></header>
<main>
<h1>/<a href="datum.html">datum</a>/<a href="datum/component.html">component</a>/<a href="datum/component/phylactery.html">phylactery</a>
        
    
            <a href="https://github.com/yogstation13/Yogstation/blob/f154989113f1d0c0952094c22a6867204167b8e1/code/datums/components/phylactery.dm#L7">
        <img src="git.png" width="16" height="16" title="code&#x2F;datums&#x2F;components&#x2F;phylactery.dm 7"/></a></h1>

<h2 id="phylactery-component">Phylactery component</h2>
<p>Used for lichtom to turn (almost) any object into a phylactery
A mob linked to a phylactery will repeatedly revive on death.</p><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr>
            <tr><th><a href="datum/component/phylactery.html#var/base_respawn_time">base_respawn_time</a></th><td>The respawn timer of the phylactery.</td></tr>
            <tr><th><a href="datum/component/phylactery.html#var/lich_mind">lich_mind</a></th><td>The mind of the lich who is linked to this phylactery.</td></tr>
            <tr><th><a href="datum/component/phylactery.html#var/num_resurrections">num_resurrections</a></th><td>The number of ressurections that have occured from this phylactery.</td></tr>
            <tr><th><a href="datum/component/phylactery.html#var/phylactery_color">phylactery_color</a></th><td>The color of the phylactery itself. Applied on creation.</td></tr>
            <tr><th><a href="datum/component/phylactery.html#var/revive_timer">revive_timer</a></th><td>A timerid to the current revival timer.</td></tr>
            <tr><th><a href="datum/component/phylactery.html#var/stun_per_resurrection">stun_per_resurrection</a></th><td>How much stun (paralyze) is caused on respawn per revival.</td></tr>
            <tr><th><a href="datum/component/phylactery.html#var/time_per_resurrection">time_per_resurrection</a></th><td>How much time is added on to the respawn time per revival.</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr>
            <tr><th><a href="datum/component/phylactery.html#proc/check_if_lich_died">check_if_lich_died</a></th><td>Signal proc for <a href="code/__DEFINES/dcs/signals/signals_global.html#define/COMSIG_GLOB_MOB_DEATH" title="COMSIG_GLOB_MOB_DEATH">COMSIG_GLOB_MOB_DEATH</a>.</td></tr>
            <tr><th><a href="datum/component/phylactery.html#proc/on_examine">on_examine</a></th><td>Signal proc for <a href="code/__DEFINES/dcs/signals/signals_atom/signals_atom_main.html#define/COMSIG_PARENT_EXAMINE" title="COMSIG_PARENT_EXAMINE">COMSIG_PARENT_EXAMINE</a>.</td></tr>
            <tr><th><a href="datum/component/phylactery.html#proc/on_lich_mind_lost">on_lich_mind_lost</a></th><td>Signal proc for <a href="code/__DEFINES/dcs/signals/signals_datum.html#define/COMSIG_PARENT_QDELETING" title="COMSIG_PARENT_QDELETING">COMSIG_PARENT_QDELETING</a> registered on the lich's mind.</td></tr>
            <tr><th><a href="datum/component/phylactery.html#proc/revive_lich">revive_lich</a></th><td>Actually undergo the process of reviving the lich at the site of the phylacery.</td></tr>
            <tr><th><a href="datum/component/phylactery.html#proc/stop_timer">stop_timer</a></th><td>Signal proc for <a href="code/__DEFINES/dcs/signals/signals_mob/signals_living.html#define/COMSIG_LIVING_REVIVE" title="COMSIG_LIVING_REVIVE">COMSIG_LIVING_REVIVE</a>.</td></tr></table>
    <h2 id="var">Var Details</h2><h3 id="var/base_respawn_time"><aside class="declaration">var </aside>base_respawn_time
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/yogstation13/Yogstation/blob/f154989113f1d0c0952094c22a6867204167b8e1/code/datums/components/phylactery.dm#L12">
        <img src="git.png" width="16" height="16" title="code&#x2F;datums&#x2F;components&#x2F;phylactery.dm 12"/></a></h3>
        <p>The respawn timer of the phylactery.</p><h3 id="var/lich_mind"><aside class="declaration">var </aside>lich_mind
            <aside>&ndash; /<a href="datum.html">datum</a>/<a href="datum/mind.html">mind</a></aside>
        
    
            <a href="https://github.com/yogstation13/Yogstation/blob/f154989113f1d0c0952094c22a6867204167b8e1/code/datums/components/phylactery.dm#L10">
        <img src="git.png" width="16" height="16" title="code&#x2F;datums&#x2F;components&#x2F;phylactery.dm 10"/></a></h3>
        <p>The mind of the lich who is linked to this phylactery.</p><h3 id="var/num_resurrections"><aside class="declaration">var </aside>num_resurrections
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/yogstation13/Yogstation/blob/f154989113f1d0c0952094c22a6867204167b8e1/code/datums/components/phylactery.dm#L22">
        <img src="git.png" width="16" height="16" title="code&#x2F;datums&#x2F;components&#x2F;phylactery.dm 22"/></a></h3>
        <p>The number of ressurections that have occured from this phylactery.</p><h3 id="var/phylactery_color"><aside class="declaration">var </aside>phylactery_color
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/yogstation13/Yogstation/blob/f154989113f1d0c0952094c22a6867204167b8e1/code/datums/components/phylactery.dm#L18">
        <img src="git.png" width="16" height="16" title="code&#x2F;datums&#x2F;components&#x2F;phylactery.dm 18"/></a></h3>
        <p>The color of the phylactery itself. Applied on creation.</p><h3 id="var/revive_timer"><aside class="declaration">var </aside>revive_timer
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/yogstation13/Yogstation/blob/f154989113f1d0c0952094c22a6867204167b8e1/code/datums/components/phylactery.dm#L26">
        <img src="git.png" width="16" height="16" title="code&#x2F;datums&#x2F;components&#x2F;phylactery.dm 26"/></a></h3>
        <p>A timerid to the current revival timer.</p><h3 id="var/stun_per_resurrection"><aside class="declaration">var </aside>stun_per_resurrection
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/yogstation13/Yogstation/blob/f154989113f1d0c0952094c22a6867204167b8e1/code/datums/components/phylactery.dm#L16">
        <img src="git.png" width="16" height="16" title="code&#x2F;datums&#x2F;components&#x2F;phylactery.dm 16"/></a></h3>
        <p>How much stun (paralyze) is caused on respawn per revival.</p><h3 id="var/time_per_resurrection"><aside class="declaration">var </aside>time_per_resurrection
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/yogstation13/Yogstation/blob/f154989113f1d0c0952094c22a6867204167b8e1/code/datums/components/phylactery.dm#L14">
        <img src="git.png" width="16" height="16" title="code&#x2F;datums&#x2F;components&#x2F;phylactery.dm 14"/></a></h3>
        <p>How much time is added on to the respawn time per revival.</p><h2 id="proc">Proc Details</h2><h3 id="proc/check_if_lich_died"><aside class="declaration">proc </aside>check_if_lich_died<aside>(/<a href="datum.html">datum</a>/source, /<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/died, gibbed) 
        
    
            <a href="https://github.com/yogstation13/Yogstation/blob/f154989113f1d0c0952094c22a6867204167b8e1/code/datums/components/phylactery.dm#L119">
        <img src="git.png" width="16" height="16" title="code&#x2F;datums&#x2F;components&#x2F;phylactery.dm 119"/></a></aside>
        </h3>
        <p>Signal proc for <a href="code/__DEFINES/dcs/signals/signals_global.html#define/COMSIG_GLOB_MOB_DEATH" title="COMSIG_GLOB_MOB_DEATH">COMSIG_GLOB_MOB_DEATH</a>.</p>
<p>If the mob containing our lich's mind is killed,
we can initiate the revival process.</p>
<p>We use the global mob death signal here,
instead of registering the normal death signal,
as it's entirely possible the wizard mindswaps
or is gibbed or something wacky happens, and
we need to make sure WHOEVER has our mind is dead</p><h3 id="proc/on_examine"><aside class="declaration">proc </aside>on_examine<aside>(/<a href="datum.html">datum</a>/source, /<a href="mob.html">mob</a>/user, /list/examine_list) 
        
    
            <a href="https://github.com/yogstation13/Yogstation/blob/f154989113f1d0c0952094c22a6867204167b8e1/code/datums/components/phylactery.dm#L78">
        <img src="git.png" width="16" height="16" title="code&#x2F;datums&#x2F;components&#x2F;phylactery.dm 78"/></a></aside>
        </h3>
        <p>Signal proc for <a href="code/__DEFINES/dcs/signals/signals_atom/signals_atom_main.html#define/COMSIG_PARENT_EXAMINE" title="COMSIG_PARENT_EXAMINE">COMSIG_PARENT_EXAMINE</a>.</p>
<p>Gives some flavor for the phylactery on examine.</p><h3 id="proc/on_lich_mind_lost"><aside class="declaration">proc </aside>on_lich_mind_lost<aside>(/<a href="datum.html">datum</a>/source) 
        
    
            <a href="https://github.com/yogstation13/Yogstation/blob/f154989113f1d0c0952094c22a6867204167b8e1/code/datums/components/phylactery.dm#L102">
        <img src="git.png" width="16" height="16" title="code&#x2F;datums&#x2F;components&#x2F;phylactery.dm 102"/></a></aside>
        </h3>
        <p>Signal proc for <a href="code/__DEFINES/dcs/signals/signals_datum.html#define/COMSIG_PARENT_QDELETING" title="COMSIG_PARENT_QDELETING">COMSIG_PARENT_QDELETING</a> registered on the lich's mind.</p>
<p>Minds shouldn't be getting deleted but if for some ungodly reason
the lich'd mind is deleted our component should go with it, as
we don't have a reason to exist anymore.</p><h3 id="proc/revive_lich"><aside class="declaration">proc </aside>revive_lich<aside>(/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/corpse) 
        
    
            <a href="https://github.com/yogstation13/Yogstation/blob/f154989113f1d0c0952094c22a6867204167b8e1/code/datums/components/phylactery.dm#L158">
        <img src="git.png" width="16" height="16" title="code&#x2F;datums&#x2F;components&#x2F;phylactery.dm 158"/></a></aside>
        </h3>
        <p>Actually undergo the process of reviving the lich at the site of the phylacery.</p>
<p>Arguments</p>
<ul>
<li>corpse - optional, the old body of the lich. Can be QDELETED or null.</li>
</ul><h3 id="proc/stop_timer"><aside class="declaration">proc </aside>stop_timer<aside>(/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/source, full_heal_flags) 
        
    
            <a href="https://github.com/yogstation13/Yogstation/blob/f154989113f1d0c0952094c22a6867204167b8e1/code/datums/components/phylactery.dm#L144">
        <img src="git.png" width="16" height="16" title="code&#x2F;datums&#x2F;components&#x2F;phylactery.dm 144"/></a></aside>
        </h3>
        <p>Signal proc for <a href="code/__DEFINES/dcs/signals/signals_mob/signals_living.html#define/COMSIG_LIVING_REVIVE" title="COMSIG_LIVING_REVIVE">COMSIG_LIVING_REVIVE</a>.</p>
<p>If our lich's mob is revived at some point before returning, stop the timer</p></main>
<footer>
    yogstation.dme
    <a href="https://github.com/yogstation13/Yogstation/tree/f154989113f1d0c0952094c22a6867204167b8e1">f154989</a>
        (master) &mdash; <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/src/dmdoc/README.md">dmdoc 1.4.1</a></footer>
</body>
</html>
