<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    
    <link rel="stylesheet" href="dmdoc.css" />
    <title>&#x2F;client - Yogstation 13</title>
</head>
<body>
<header>
    <a href="index.html">Yogstation 13</a> -
    <a href="index.html#modules">Modules</a> -
    <a href="index.html#types">Types</a>
 &mdash; <a href="client.html#var">Var Details</a> - <a href="client.html#proc">Proc Details</a></header>
<main>
<h1>/<a href="client.html">client</a><aside> inherits /<a href="datum.html">datum</a></aside>
        
    
            <a href="https://github.com/yogstation13/Yogstation/blob/b6a33ad61b7098deea4dfea2ca37eb6f71b01b58/code/_onclick/drag_drop.dm#L27">
        <img src="git.png" width="16" height="16" title="code&#x2F;_onclick&#x2F;drag_drop.dm 27"/></a></h1>

<table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr>
            <tr><th><a href="client.html#var/last_asset_job">last_asset_job</a></th><td>List of all completed blocking send jobs awaiting acknowledgement by send_asset</td></tr>
            <tr><th><a href="client.html#var/last_completed_asset_job">last_completed_asset_job</a></th><td>Last asset send job id.</td></tr>
            <tr><th><a href="client.html#var/screen_maps">screen_maps</a></th><td>Assoc list with all the active maps - when a screen obj is added to
a map, it's put in here as well.</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr>
            <tr><th><a href="client.html#proc/Move">Move</a></th><td>Move a client in a direction</td></tr>
            <tr><th><a href="client.html#proc/Process_Grab">Process_Grab</a></th><td>Process_Grab()
Called by client/Move()
Checks to see if you are being grabbed and if so attemps to break it</td></tr>
            <tr><th><a href="client.html#proc/Process_Incorpmove">Process_Incorpmove</a></th><td>Allows mobs to ignore density and phase through objects</td></tr>
            <tr><th><a href="client.html#proc/asset_cache_confirm_arrival">asset_cache_confirm_arrival</a></th><td>Process asset cache client topic calls for &quot;asset_cache_confirm_arrival=[INT]&quot;</td></tr>
            <tr><th><a href="client.html#proc/asset_cache_preload_data">asset_cache_preload_data</a></th><td>Process asset cache client topic calls for &quot;asset_cache_preload_data=[HTML+JSON_STRING]</td></tr>
            <tr><th><a href="client.html#proc/asset_cache_update_json">asset_cache_update_json</a></th><td>Updates the client side stored html/json combo file used to keep track of what assets the client has between restarts/reconnects.</td></tr>
            <tr><th><a href="client.html#proc/asset_flush">asset_flush</a></th><td>Blocks until all currently sending browser assets have been sent.
Due to byond limitations, this proc will sleep for 1 client round trip even if the client has no pending asset sends.
This proc will return an untrue value if it had to return before confirming the send, such as timeout or the client going away.</td></tr>
            <tr><th><a href="client.html#proc/clear_all_maps">clear_all_maps</a></th><td>Clears all the maps of registered screen objects.</td></tr>
            <tr><th><a href="client.html#proc/clear_map">clear_map</a></th><td>Clears the map of registered screen objects.</td></tr>
            <tr><th><a href="client.html#proc/close_popup">close_popup</a></th><td>Closes a popup.</td></tr>
            <tr><th><a href="client.html#proc/create_popup">create_popup</a></th><td>Creates a popup window with a basic map element in it, without any
further initialization.</td></tr>
            <tr><th><a href="client.html#proc/handle_popup_close">handle_popup_close</a></th><td>When the popup closes in any way (player or proc call) it calls this.</td></tr>
            <tr><th><a href="client.html#proc/register_map_obj">register_map_obj</a></th><td>Registers screen obj with the client, which makes it visible on the
assigned map, and becomes a part of the assigned map's lifecycle.</td></tr>
            <tr><th><a href="client.html#proc/setup_popup">setup_popup</a></th><td>Create the popup, and get it ready for generic use by giving
it a background.</td></tr>
            <tr><th><a href="client.html#proc/uiclose">uiclose</a></th><td>verb</td></tr></table>
    <h2 id="var">Var Details</h2><h3 id="var/last_asset_job"><aside class="declaration">var </aside>last_asset_job
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/yogstation13/Yogstation/blob/b6a33ad61b7098deea4dfea2ca37eb6f71b01b58/code/modules/asset_cache/asset_cache_client.dm#L6">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;asset_cache&#x2F;asset_cache_client.dm 6"/></a></h3>
        <p>List of all completed blocking send jobs awaiting acknowledgement by send_asset</p><h3 id="var/last_completed_asset_job"><aside class="declaration">var </aside>last_completed_asset_job
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/yogstation13/Yogstation/blob/b6a33ad61b7098deea4dfea2ca37eb6f71b01b58/code/modules/asset_cache/asset_cache_client.dm#L7">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;asset_cache&#x2F;asset_cache_client.dm 7"/></a></h3>
        <p>Last asset send job id.</p><h3 id="var/screen_maps"><aside class="declaration">var </aside>screen_maps
            <aside>&ndash; /list</aside>
        
    
            <a href="https://github.com/yogstation13/Yogstation/blob/b6a33ad61b7098deea4dfea2ca37eb6f71b01b58/code/_onclick/hud/map_popups.dm#L8">
        <img src="git.png" width="16" height="16" title="code&#x2F;_onclick&#x2F;hud&#x2F;map_popups.dm 8"/></a></h3>
        <p>Assoc list with all the active maps - when a screen obj is added to
a map, it's put in here as well.</p>
<p>Format: list(<mapname> = list(/obj/screen))</p><h2 id="proc">Proc Details</h2><h3 id="proc/Move"><aside class="declaration">proc </aside>Move<aside>(n, direct) 
        
    
            <a href="https://github.com/yogstation13/Yogstation/blob/b6a33ad61b7098deea4dfea2ca37eb6f71b01b58/code/modules/mob/mob_movement.dm#L61">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;mob&#x2F;mob_movement.dm 61"/></a></aside>
        </h3>
        <p>Move a client in a direction</p>
<p>Huge proc, has a lot of functionality</p>
<p>Mostly it will despatch to the mob that you are the owner of to actually move
in the physical realm</p>
<p>Things that stop you moving as a mob:</p>
<ul>
<li>world time being less than your next move_delay</li>
<li>not being in a mob, or that mob not having a loc</li>
<li>missing the n and direction parameters</li>
<li>being in remote control of an object (calls Moveobject instead)</li>
<li>being dead (it ghosts you instead)</li>
</ul>
<p>Things that stop you moving as a mob living (why even have OO if you're just shoving it all
in the parent proc with istype checks right?):</p>
<ul>
<li>having incorporeal_move set (calls Process_Incorpmove() instead)</li>
<li>being grabbed</li>
<li>being buckled  (relaymove() is called to the buckled atom instead)</li>
<li>having your loc be some other mob (relaymove() is called on that mob instead)</li>
<li>Not having MOBILITY_MOVE</li>
<li>Failing Process_Spacemove() call</li>
</ul>
<p>At this point, if the mob is is confused, then a random direction and target turf will be calculated for you to travel to instead</p>
<p>Now the parent call is made (to the byond builtin move), which moves you</p>
<p>Some final move delay calculations (doubling if you moved diagonally successfully)</p>
<p>if mob throwing is set I believe it's unset at this point via a call to finalize</p>
<p>Finally if you're pulling an object and it's dense, you are turned 180 after the move
(if you ask me, this should be at the top of the move so you don't dance around)</p><h3 id="proc/Process_Grab"><aside class="declaration">proc </aside>Process_Grab<aside>() 
        
    
            <a href="https://github.com/yogstation13/Yogstation/blob/b6a33ad61b7098deea4dfea2ca37eb6f71b01b58/code/modules/mob/mob_movement.dm#L153">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;mob&#x2F;mob_movement.dm 153"/></a></aside>
        </h3>
        <p>Process_Grab()
Called by client/Move()
Checks to see if you are being grabbed and if so attemps to break it</p><h3 id="proc/Process_Incorpmove"><aside class="declaration">proc </aside>Process_Incorpmove<aside>(direct) 
        
    
            <a href="https://github.com/yogstation13/Yogstation/blob/b6a33ad61b7098deea4dfea2ca37eb6f71b01b58/code/modules/mob/mob_movement.dm#L180">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;mob&#x2F;mob_movement.dm 180"/></a></aside>
        </h3>
        <p>Allows mobs to ignore density and phase through objects</p>
<p>Called by client/Move()</p>
<p>The behaviour depends on the incorporeal_move value of the mob</p>
<ul>
<li>INCORPOREAL_MOVE_BASIC - forceMoved to the next tile with no stop</li>
<li>INCORPOREAL_MOVE_SHADOW  - the same but leaves a cool effect path</li>
<li>INCORPOREAL_MOVE_JAUNT - the same but blocked by holy tiles</li>
</ul>
<p>You'll note this is another mob living level proc living at the client level</p><h3 id="proc/asset_cache_confirm_arrival"><aside class="declaration">proc </aside>asset_cache_confirm_arrival<aside>(job_id) 
        
    
            <a href="https://github.com/yogstation13/Yogstation/blob/b6a33ad61b7098deea4dfea2ca37eb6f71b01b58/code/modules/asset_cache/asset_cache_client.dm#L10">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;asset_cache&#x2F;asset_cache_client.dm 10"/></a></aside>
        </h3>
        <p>Process asset cache client topic calls for &quot;asset_cache_confirm_arrival=[INT]&quot;</p><h3 id="proc/asset_cache_preload_data"><aside class="declaration">proc </aside>asset_cache_preload_data<aside>(data) 
        
    
            <a href="https://github.com/yogstation13/Yogstation/blob/b6a33ad61b7098deea4dfea2ca37eb6f71b01b58/code/modules/asset_cache/asset_cache_client.dm#L21">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;asset_cache&#x2F;asset_cache_client.dm 21"/></a></aside>
        </h3>
        <p>Process asset cache client topic calls for &quot;asset_cache_preload_data=[HTML+JSON_STRING]</p><h3 id="proc/asset_cache_update_json"><aside class="declaration">proc </aside>asset_cache_update_json<aside>(verify, /list/new_assets) 
        
    
            <a href="https://github.com/yogstation13/Yogstation/blob/b6a33ad61b7098deea4dfea2ca37eb6f71b01b58/code/modules/asset_cache/asset_cache_client.dm#L37">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;asset_cache&#x2F;asset_cache_client.dm 37"/></a></aside>
        </h3>
        <p>Updates the client side stored html/json combo file used to keep track of what assets the client has between restarts/reconnects.</p><h3 id="proc/asset_flush"><aside class="declaration">proc </aside>asset_flush<aside>(timeout) 
        
    
            <a href="https://github.com/yogstation13/Yogstation/blob/b6a33ad61b7098deea4dfea2ca37eb6f71b01b58/code/modules/asset_cache/asset_cache_client.dm#L48">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;asset_cache&#x2F;asset_cache_client.dm 48"/></a></aside>
        </h3>
        <p>Blocks until all currently sending browser assets have been sent.
Due to byond limitations, this proc will sleep for 1 client round trip even if the client has no pending asset sends.
This proc will return an untrue value if it had to return before confirming the send, such as timeout or the client going away.</p><h3 id="proc/clear_all_maps"><aside class="declaration">proc </aside>clear_all_maps<aside>() 
        
    
            <a href="https://github.com/yogstation13/Yogstation/blob/b6a33ad61b7098deea4dfea2ca37eb6f71b01b58/code/_onclick/hud/map_popups.dm#L104">
        <img src="git.png" width="16" height="16" title="code&#x2F;_onclick&#x2F;hud&#x2F;map_popups.dm 104"/></a></aside>
        </h3>
        <p>Clears all the maps of registered screen objects.</p><h3 id="proc/clear_map"><aside class="declaration">proc </aside>clear_map<aside>(map_name) 
        
    
            <a href="https://github.com/yogstation13/Yogstation/blob/b6a33ad61b7098deea4dfea2ca37eb6f71b01b58/code/_onclick/hud/map_popups.dm#L92">
        <img src="git.png" width="16" height="16" title="code&#x2F;_onclick&#x2F;hud&#x2F;map_popups.dm 92"/></a></aside>
        </h3>
        <p>Clears the map of registered screen objects.</p>
<p>Not really needed most of the time, as the client's screen list gets reset
on relog. any of the buttons are going to get caught by garbage collection
anyway. they're effectively qdel'd.</p><h3 id="proc/close_popup"><aside class="declaration">proc </aside>close_popup<aside>(popup) 
        
    
            <a href="https://github.com/yogstation13/Yogstation/blob/b6a33ad61b7098deea4dfea2ca37eb6f71b01b58/code/_onclick/hud/map_popups.dm#L161">
        <img src="git.png" width="16" height="16" title="code&#x2F;_onclick&#x2F;hud&#x2F;map_popups.dm 161"/></a></aside>
        </h3>
        <p>Closes a popup.</p><h3 id="proc/create_popup"><aside class="declaration">proc </aside>create_popup<aside>(name, ratiox, ratioy) 
        
    
            <a href="https://github.com/yogstation13/Yogstation/blob/b6a33ad61b7098deea4dfea2ca37eb6f71b01b58/code/_onclick/hud/map_popups.dm#L116">
        <img src="git.png" width="16" height="16" title="code&#x2F;_onclick&#x2F;hud&#x2F;map_popups.dm 116"/></a></aside>
        </h3>
        <p>Creates a popup window with a basic map element in it, without any
further initialization.</p>
<p>Ratio is how many pixels by how many pixels (keep it simple).</p>
<p>Returns a map name.</p><h3 id="proc/handle_popup_close"><aside class="declaration">verb </aside>handle_popup_close<aside>(window_id) 
        
    
            <a href="https://github.com/yogstation13/Yogstation/blob/b6a33ad61b7098deea4dfea2ca37eb6f71b01b58/code/_onclick/hud/map_popups.dm#L168">
        <img src="git.png" width="16" height="16" title="code&#x2F;_onclick&#x2F;hud&#x2F;map_popups.dm 168"/></a></aside>
        </h3>
        <p>When the popup closes in any way (player or proc call) it calls this.</p><h3 id="proc/register_map_obj"><aside class="declaration">proc </aside>register_map_obj<aside>(/<a href="obj.html">obj</a>/<a href="obj/screen.html">screen</a>/screen_obj) 
        
    
            <a href="https://github.com/yogstation13/Yogstation/blob/b6a33ad61b7098deea4dfea2ca37eb6f71b01b58/code/_onclick/hud/map_popups.dm#L73">
        <img src="git.png" width="16" height="16" title="code&#x2F;_onclick&#x2F;hud&#x2F;map_popups.dm 73"/></a></aside>
        </h3>
        <p>Registers screen obj with the client, which makes it visible on the
assigned map, and becomes a part of the assigned map's lifecycle.</p><h3 id="proc/setup_popup"><aside class="declaration">proc </aside>setup_popup<aside>(popup_name, width, height, tilesize, bg_icon) 
        
    
            <a href="https://github.com/yogstation13/Yogstation/blob/b6a33ad61b7098deea4dfea2ca37eb6f71b01b58/code/_onclick/hud/map_popups.dm#L140">
        <img src="git.png" width="16" height="16" title="code&#x2F;_onclick&#x2F;hud&#x2F;map_popups.dm 140"/></a></aside>
        </h3>
        <p>Create the popup, and get it ready for generic use by giving
it a background.</p>
<p>Width and height are multiplied by 64 by default.</p><h3 id="proc/uiclose"><aside class="declaration">verb </aside>uiclose<aside>(ref) 
        
    
            <a href="https://github.com/yogstation13/Yogstation/blob/b6a33ad61b7098deea4dfea2ca37eb6f71b01b58/code/modules/tgui/external.dm#L143">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;tgui&#x2F;external.dm 143"/></a></aside>
        </h3>
        <p>verb</p>
<p>Called by UIs when they are closed.
Must be a verb so winset() can call it.</p>
<p>required uiref ref The UI that was closed.</p></main>
<footer>
    yogstation.dme
    <a href="https://github.com/yogstation13/Yogstation/tree/b6a33ad61b7098deea4dfea2ca37eb6f71b01b58">b6a33ad</a>
        (master) &mdash; <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/src/dmdoc/README.md">dmdoc 1.2.1</a></footer>
</body>
</html>
